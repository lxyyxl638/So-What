create table q2a_answer(
  id int not null primary key auto_increment,
  qid int not null,
  content text not null,
  comment text not null,
  username varchar(128) not null,
  good int not null,
  bad int not null,
  date timestamp,
  index(qid),
  foreign key(qid) references q2a_question(id) on delete cascade on update cascade
) default charset utf8;

 create table q2a_question(
   id int not null primary key auto_increment,
   username varchar(128) not null,
   realname varchar(128) not null,
   title varchar(128) not null,
   content text not null,
   view_num int not null,
   answer_num int not null,
   date timestamp not null
  ) default charset utf8;

create table user(
  id int not null auto_increment primary key,
  username varchar(128) not null,
  password varchar(128) not null,
  realname varchar(128) not null,
  signupdate timestamp not null,
  lastlogin timestamp not null,
  lastloginfail timestamp not null,
  numloginfail int not null
) default charset utf8;

create table user_profile(
  id int not null primary key auto_increment,
  uid int not null,
  realname varchar(128) not null,
  email varchar(128) not null,
  photo varchar(128) not null,
  lastask timestamp not null,
  index(uid),
  foreign key(uid) references user(id) on delete cascade on update cascade
) default charset utf8;

create table tag(
  id int not null primary key auto_increment,
  tag varchar(128) not null
) default charset utf8;

create table user_tag(
  id int not null primary key auto_increment,
  uid int not null,
  tid int not null
) default charset utf8;

create table tag_question(
  id int not null primary key auto_increment,
  tid int not null,
  qid int not null
) default charset utf8;